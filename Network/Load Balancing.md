# Load Balancing
> 서버에 가해지는 부하(Load)를 분산해주는(balancing) 기술


**로드밸런서** : 로드밸런싱 작업을 담당하는 장비

![Untitled-3](https://github.com/seonyoung42/CS_Book/assets/77603632/0033b05a-48f1-4cae-b6f1-f6ec05410318)

서버에 가해지는 트래픽을 균등하게 나누어 여러 서버로 분산시켜주는 기술을 로드 밸런싱이라고 한다.

<br>

## 로드밸런서의 종류
> 로드밸런서는 OSI 7계층을 기준으로 어떻게 부하를 분산하는지에 따라 종류가 나눠진다.
> 
> ex) 2계층을 기준으로 부하를 분산한다면 L2, 3계층을 기준으로 부하를 분산한다면 L3

L4 로드 밸런서와 L7 로드 밸런서가 가장 많이 활용된다.

<br>

## L4 로드 밸런서
> Transport 계층 사용하여 Port 기반 부하 분산

<br>

### - L4 로드밸런싱 기법
#### 1. 라운드 로빈 (Round Robin)

> 클라이언트로부터 받은 요청을 로드밸런싱 대상 서버에 순서대로 할당하는 방식

첫 번째 요청은 첫 번째 서버, 두 번째 요청은 두 번째 서버, 세 번째 요청은 세 번째 서버에 할당

세션을 순차적으로 서버에 맺어주는 방식이므로 경로별로 같은 처리량이 보장되지 않음.

#### 2. 최소 연결 (Least Connection)

> 가장 적은 세션을 가진 서버로 트래픽을 보내는 방식

가장 많이 사용되는 방식


#### 3. 최소 응답시간 (Least Response Time)

> 가장 빠른 응답 시간을 보이는 서버에 우선으로 트래픽을 보내주는 방식

#### 4. 해시 기반 스케줄링(Source hash Scheduling)

> 사용자의 IP를 해싱한 후 결과에 따라 서버로 요청 분배하는 방식

특정 클라이언트가 같은 서버로만 할당되는 것을 보장

<br>

## L7 로드 밸런서
> Application 계층 사용하여 요청(URL) 기반 부하 분산

<br>

### - L7 로드밸런싱 기법
#### 1. URL 스위칭 방식 (URL Switching)
> 특정 하위 URL들은 특정 서버로 처리하는 방식

#### 2. 컨텍스트 스위칭 방식 (Context Switching)
> 클라이언트가 요청한 특정 리소스에 대해 특정 서버로 연결하는 방식

#### 3. 쿠키 지속성 (Persistence with Cookies)
> 쿠키 정보를 바탕으로 클라이언트가 연결했었던 서버에 계속 할당해주는 방식
 
<br>

## Ref
https://deveric.tistory.com/91

https://velog.io/@dhnjun9/TIL-로드-밸런싱#①-l4-로드-밸런싱
